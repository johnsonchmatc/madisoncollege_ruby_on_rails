footer:@johnsonch :: Chris Johnson :: Ruby on Rails Development - Week 3
autoscale: true

#Ruby on Rails Development
##Week 3

---
#Chapters 1 and 2
---
#MVC

---
![fit](https://dl.dropboxusercontent.com/s/gkvmxepquu061xc/2014-09-06%20at%2012.48%20PM.png?dl=0)

---
##Model
* Responsible for maintaining the state of the application
* Enforcing business rules

---
##View
* User interface

---
##Controller
* Orchestrate the application (Traffic Cop)

---
#What is REST?
> Representational State Transfer

* Simple set of Verbs that work on each Noun of an application.

---
#What is a 'resource'?
* Simply a controller
* Scaffolding creates a 1 to 1 relationship to model
* Does not need to reflect a model
* Defaults to REST actions

---
#What is 'scaffolding'
* Generated by the ```scaffold``` command
* Generates code based on the attribute notation ```name:string```
* Creates model, view, controller, helper, route, migration and tests
* Has default basic code

---
#Scaffolding

```bash
$ bundle exec rails g scaffold title:string body:text author_id:integer viewable:boolean
```

---
#Scaffolding - Do I need to use that?
^ No you can either use other generators or hand create the files. Scaffolding
generates more than you need most of the time, but it can be a useful learning
tool.

---
##Protip
```bash
$ bundle exec rails g
```

---
#Routes

---
#Example Route

```ruby
DemoApp::Application.routes.draw do
  resources :users
end
```

---
#$ rake routes

```
Prefix    Verb   URI Pattern                    Controller#Action
users     GET    /users(.:format)               users#index
          POST   /users(.:format)               users#create
new_user  GET    /users/new(.:format)           users#new
edit_user GET    /users/:id/edit(.:format)      users#edit
users     GET    /users/:id(.:format)           users#show
          PATCH  /users/:id(.:format)           users#update
          PUT    /users/:id(.:format)           users#update
          DELETE /users/:id(.:format)           users#destroy
```
^Maps to CRUD actions (index,show,new,create,edit,update,destroy)

---
##PUT vs PATCH
* PATCH is like PUT however PUT works on the full dataset where as PATCH only requires the delta.
* PATCH was defined in 1995 and adopted into Rails in version 4.0

---
##Sample update request
```
started PATCH "/users/1" for 50.50.89.28 at 2014-12-26 12:22:13 +0000
Processing by UsersController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"dWzrsueQQJPL9PxuZnM8NnQYzrtC34PpV6sbK8bd0oaxzLHlgK0224q+OVWrDF
  /HApdIAZGy2ywGlzQ0oywpAQ==", "user"=>{"name"=>"chris", "email"=>"cgjohnson1@madisoncollege.edu"}, "commit"=>"Update User", "id"=>"1"}
  User Load (0.2ms)  SELECT  "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", 1]]
   (0.1ms)  begin transaction
  SQL (0.4ms)  UPDATE "users" SET "name" = ?, "updated_at" = ? WHERE "users"."id" = ?  [["name", "chris"],
  ["updated_at", "2014-12-26 12:22:13.298574"], ["id", 1]]
   (29.2ms)  commit transaction
Redirected to http://grandeur-blackwater-bay-69-123648.use1.nitrousbox.com:3000/users/1
Completed 302 Found in 36ms (ActiveRecord: 29.8ms)
```

---
#Turbolinks

![fit inline](http://media.railscasts.com/assets/episodes/videos/390-turbolinks.mp4)

---
##Modeling demo users

![inline 200%](https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/images/figures/demo_user_model.png)

---
##Modeling demo microposts

![inline 200%](https://softcover.s3.amazonaws.com/636/ruby_on_rails_tutorial/images/figures/demo_micropost_model.png)

---
#Rake
* Ruby make
* Rake is a Make-like program implemented in Ruby. Tasks and dependencies are specified in standard Ruby syntax.

---
##Protip
```bash
$ bundle exec rake -vT
```

---
##IRB

Interactive Ruby Shell (IRB or irb) is a REPL for ruby. REPL stands for Read–eval–print loop.

```bash
$ irb
```

---
##Rails Console
* Let's you try out code against
* ```bash
$ bundle exec rails console
```

---
#Rails Class Inheritance Hierarchies

[https://www.railstutorial.org/book/toy_app#sec-inheritance_hierarchies](https://www.railstutorial.org/book/toy_app#sec-inheritance_hierarchies)

---
#Git

---
##Configuring Git
* See what is in your git config file ```cat ~/.gitconfig```
```bash
$ git config --global user.name "Your Name"
$ git config --global user.email your.email@example.com
```
* ```cat ~/.gitconfig```

---
#Git Demo
^
```bash
$ mkdir class_git_demo
$ cd class_git_demo
$ git init
$ touch file-a.txt
$ git status
$ git add file-a.txt
$ git status
$ git commit -a -m 'our first file'
$ git status
$ git log
$ git checkout -b branch-a
$ touch file-branch-a.txt
$ git status
$ git add .
$ git commit -am 'branch-a file added'
$ git log
$ git checkout master
$ git merge branch-a
$ git branch --contains <sha>
$ git branch -d branch-a
$ git checkout -b branch-b
$ touch file-branch-b.txt
$ git add .
$ git commit -am 'added file-branch-b'
$ vim file-branch-b.txt
$ git status
$ git diff
$ git add .
$ git commit -am 'added Hello World to file-branch-b'
$ git log
$ git checkout -b branch-c
$ touch file-branch-c.txt
$ git add .
$ git commit -am 'added file-branch-c.txt'
$ vim file-branch-c.txt
$ git add .
$ git commit -am 'added code to branch-c file'
$ vim file-branch-c.txt
$ vim file-branch-a.txt
$ git status
$ git diff
$ git add .
$ git commit -am 'edits to both a and c'
$ vim ~/.gitconfig
  add ``` [alias] ```
  add ```    tree = log --graph --decorate --oneline --all --color ```
$ git tree
$ git commit master
$ git merge branch-c
$ git status
$ git tree
$ git tag
$ git status
$ git tag -a project-1 -m 'my code for project 1'
$ git tag
* $ git push --tags
```

---
#Bitbucket
* Creating a repository
* Inviting contributors

---
#Deploying

---
#Heroku vs VPS

---
##Heroku
Is managed by Heroku so you don't have to patch or configure, but costs $$.

---
##Heroku Deployment Process

###Step 1:
```bash
$ heroku create my-sweet-app
```
###Step 2:
```bash
$ git push heroku master
```
###Step 3: Profit!

---
#Our Application
